(self.webpackChunkdoc_site=self.webpackChunkdoc_site||[]).push([[779],{63779:function(s,P,u){"use strict";u.r(P),u.d(P,{Button:function(){return Ct},Tabs:function(){return Tt},Transition:function(){return jt},Upload:function(){return dt},WaterMark:function(){return ht}});var B=u(13311),m=u.n(B),j=u(49616),C=u.n(j),I=u(42035),x=u.n(I),w=u(74875),z=u.n(w),l=u(41398),at=function(t){var n,a=new FormData;a.append("file",(n=t.data)!==null&&n!==void 0?n:"");var r=new XMLHttpRequest;return r.open("post",t.action,!0),r.onload=function(){console.log("loaded")},r.upload.onprogress=function(i){i.total>0&&(i.percent=i.loaded/i.total*100,console.log("upload progress:",i.percent))},r.send(a),{abort:function(){r.abort()}}},ot=+new Date,it=0,G=function(){return"upload-file-".concat(ot,"-").concat(it++)},ut=function(t,n){var a=t.name,r=t.type,i=Array.isArray(n)?n:n.split(",");return i.some(function(o){var c=o.trim();return o==="*"||a.endsWith(c)||r===c})},ct=function(t,n){var a=C()(n),r=a.findIndex(function(i){var o=i.uid;return o===t.uid});return r===-1?a.push(t):a[r]=t,a},v=u(46228),lt=["children","accept","directory","action","onBatchStart"],st=function(t){var n=t.children,a=t.accept,r=a===void 0?"*":a,i=t.directory,o=t.action,c=o===void 0?"":o,d=t.onBatchStart,T=z()(t,lt),g=l.useRef(null),p=l.useState(G()),f=x()(p,2),R=f[0],b=f[1],N=function(){g.current&&g.current.click()},$=function(S){S.preventDefault(),S.type!=="dragover"&&(console.log("event:",S.dataTransfer.files),L(C()(S.dataTransfer.files)))},F={onClick:N,onDrop:$,onDragOver:$},E=function(S){var h=S.target.files,y=C()(h!=null?h:[]).filter(function(U){return!i||ut(U,r)});L(y),b(G())},L=function(S){var h=C()(S!=null?S:[]).map(function(y){return y.uid=G(),y});d==null||d(h),h.forEach(function(y){at({data:y,action:c})})};return(0,v.jsxs)("div",m()(m()({},F),{},{children:[(0,v.jsx)("input",m()({type:"file",ref:g,onChange:E,style:{display:"none"}},T),R),n]}))},Z=st,vt=["children","type"],dt=function(t){var n=t.children,a=t.type,r=z()(t,vt),i=l.useState(),o=x()(i,2),c=o[0],d=o[1],T=l.useMemo(function(){return c==null?void 0:c.map(function(p){return(0,v.jsx)("div",{children:p.name},p.uid)})},[c]),g=function(f){var R=C()(f);f.forEach(function(b){R=ct(b,R)}),d(R)};return a==="drag"?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("div",{className:"upload-drag",children:(0,v.jsx)(Z,m()(m()({},r),{},{onBatchStart:g,action:"http://127.0.0.1:3000/upload",children:n}))}),T]}):(0,v.jsxs)(Z,m()(m()({},r),{},{onBatchStart:g,action:"http://127.0.0.1:3000/upload",children:[n,T]}))};function ft(e,t,n){e.translate(n/2,n/2),e.rotate(Math.PI/180*t),e.translate(-n/2,-n/2)}function X(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:14,n=20;return Boolean(e.length)?e.length*t+n:n+t}function pt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:14,n=X(e,t);return[n/2,n/2]}var ht=function(t){var n=t.children,a=t.text,r=t.font,i=r===void 0?{}:r,o=t.width,c=o===void 0?90:o,d=t.height,T=d===void 0?90:d,g=i.fontSize,p=g===void 0?14:g,f=i.color,R=f===void 0?"rgba(0,0,0,.6)":f,b=l.useRef(null),N=l.useCallback(function(){var F=document.createElement("canvas"),E=F.getContext("2d");if(F.setAttribute("width","".concat(X(a,p),"px")),F.setAttribute("height","".concat(X(a,p),"px")),E){var L=pt(a,p),k=x()(L,2),S=k[0],h=k[1];ft(E,-45,X(a,p)),E.font="".concat(p,"px sans-serif"),E.textAlign="center",E.fillStyle=R,E.textBaseline="middle",E.fillText(a,S,h,c);var y=F.toDataURL();$(y)}},[]),$=function(E){if(b.current){var L=b.current;L.setAttribute("style","background-image:url(".concat(E,")"))}};return l.useEffect(function(){N()},[a]),(0,v.jsx)("div",{ref:b,children:n})},bt=u(87329),J=u.n(bt),Q=(0,l.createContext)(null),gt=function(t){var n=l.useContext(Q),a=n.tabs,r=a===void 0?[]:a,i=t.tabPosition,o=i===void 0?"top":i,c=t.onTabClick,d=t.activeKey,T=l.useRef(null),g=l.useState(),p=x()(g,2),f=p[0],R=p[1],b=o==="top"||o==="bottom",N=l.useMemo(function(){return b?"left":"top"},[b]),$=l.useState(),F=x()($,2),E=F[0],L=F[1];l.useEffect(function(){var h=C()(T.current.children),y=new Map,U;h.forEach(function(O,_){console.log("bound:",O.getBoundingClientRect(),O);var A=O.getBoundingClientRect(),K=A.width,tt=A.height;_===0&&(U={left:A.left||0,top:A.top||0}),y.set(r[_].key,{width:K,height:tt,offset:A[N]-U[N],left:A.left,top:A.top})}),R(y)},[b,r]),l.useEffect(function(){var h,y,U,O;console.log(o,N),L((O={},J()(O,N,f==null||(h=f.get(d))===null||h===void 0?void 0:h.offset),J()(O,"width",b?f==null||(y=f.get(d))===null||y===void 0?void 0:y.width:"2px"),J()(O,"height",b?"2px":f==null||(U=f.get(d))===null||U===void 0?void 0:U.height),O))},[d,f,b]);function k(h){return function(y){return c(h,y)}}var S=l.useMemo(function(){return(0,v.jsx)(v.Fragment,{children:r.map(function(h){return(0,v.jsx)("div",{onClick:k(h.key),"data-node-key":h.key,className:"tab-nav-item".concat(h.key===d?" tab-nav-item-active":""),children:h.label},h.key)})})},[d]);return(0,v.jsxs)("div",{className:"tab-nav-wrapper",children:[(0,v.jsx)("div",{className:"tab-nav-list",ref:T,children:S}),(0,v.jsx)("div",{className:"tab-ink-bar",style:E})]})};function yt(e){var t=(0,l.useRef)();t.current=(0,l.useMemo)(function(){return e},[e]);var n=(0,l.useRef)();return n.current||(n.current=function(){for(var a,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(a=t.current)===null||a===void 0?void 0:a.apply(this,i)}),n.current}function mt(e,t){var n=t||{},a=n.defaultValue,r=n.value,i=n.onChange,o=n.postState,c=(0,l.useState)(function(){return r!==void 0?r:a!==void 0?typeof a=="function"?a():a:typeof e=="function"?e():e}),d=x()(c,2),T=d[0],g=d[1],p=r!==void 0?r:T,f=o?o(p):p,R=yt(function(b,N){g(b)});return[f,R]}var xt=function(t){var n=t.activeKey,a=l.useContext(Q),r=a.tabs,i=r===void 0?[]:r,o=l.useMemo(function(){return(0,v.jsx)(v.Fragment,{children:i.map(function(c){return(0,v.jsx)("div",{className:"tab-panel".concat(c.key===n?" tab-panel-active":" tab-panel-hidden"),children:(c==null?void 0:c.children)||"123"},c.key)})})},[n]);return(0,v.jsx)("div",{className:"tab-panel-wrapper",children:o})},q="tab",Tt=function(t){var n,a=t.items,r=a===void 0?[]:a,i=t.tabPosition,o=i===void 0?"top":i,c=t.activeKey,d=t.onChange,T=mt(r==null||(n=r[0])===null||n===void 0?void 0:n.key,{value:c}),g=x()(T,2),p=g[0],f=g[1];function R($,F){f($);var E=$!==p;E&&(d==null||d($))}var b={activeKey:p,tabPosition:o,onTabClick:R},N={activeKey:p};return(0,v.jsx)(Q.Provider,{value:{tabs:r},children:(0,v.jsxs)("div",{className:"".concat(q,"-wrapper ").concat(q,"-direction-").concat(o),children:[(0,v.jsx)(gt,m()({},b)),(0,v.jsx)(xt,m()({},N))]})})};function Et(e){return Object.prototype.toString.call(e)==="[object Object]"}function At(e){return typeof e=="string"}var Rt=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];for(var r=Array.prototype.slice.call(arguments),i=[],o=0;o<r.length;o++)if(Boolean(r[o]))if(Et(r[o]))for(var c in r[o])r[o].hasOwnProperty(c)&&r[o][c]&&i.push(c);else At(r[o])&&i.push(r[o]);return i.join(" ")},Ct=l.forwardRef(function(e,t){var n=e.onClick,a=e.children,r=e.loading,i=e.className,o=e.style,c=e.size,d=c===void 0?"middle":c,T=e.btnType,g=T===void 0?"default":T,p=e.block,f=e.round,R=function($){if(r){$.preventDefault();return}n==null||n($)},b=l.useMemo(function(){return Rt(i,"btn-type-".concat(g),"btn-size-".concat(d),"jj-btn",{"btn-loading":r,"btn-block":p,"btn-round":f})},[i]);return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)("button",{onClick:R,ref:t,className:b,style:o,children:a})})}),$t=u(86093),St=u.n($t),M;(function(e){e.UNMOUNTED="unmounted",e.ENTER_FROM="enterFrom",e.ENTER_ACTIVE="enterActive",e.ENTER_TO="enterTo",e.LEAVE_FROM="leaveFrom",e.LEAVE_ACTIVE="leaveActive",e.LEAVE_TO="leaveTo"})(M||(M={}));var jt=l.forwardRef(function(e,t){var n=e.children,a=e.enterFrom,r=a===void 0?"t-enter-from":a,i=e.enterTo,o=i===void 0?"t-enter-to":i,c=e.enterActive,d=c===void 0?"t-enter-active":c,T=e.leaveTo,g=T===void 0?"t-leave-to":T,p=e.in,f=e.duration,R=f===void 0?1e3:f,b=e.leaveFrom,N=b===void 0?"":b,$=e.leaveActive,F=$===void 0?"t-leave-active":$,E=e.unMountOnExit,L=E===void 0?!1:E,k=e.unMountOnEnter,S=k===void 0?!1:k,h=l.useState(S?M.UNMOUNTED:M.ENTER_FROM),y=x()(h,2),U=y[0],O=y[1],_=l.useRef(null),A=l.useRef(null),K=l.useRef();function tt(){var D;A==null||(D=A.current)===null||D===void 0||D.classList.remove(d,o)}var Mt=l.useMemo(function(){var D=l.cloneElement(n,{ref:function(H){A.current=H,t&&(typeof t=="function"?t(A.current):t&&St()(t)==="object"&&(t.current=A.current))},className:r});return D},[]),et=function(V){K.current=setTimeout(function(){O(V),K.current=null,L&&V===M.LEAVE_TO&&O(M.UNMOUNTED)},R)},nt=function(V){requestAnimationFrame(function(){requestAnimationFrame(V)})},rt=function(V){var H,Y;switch(V){case M.ENTER_TO:(H=A.current)===null||H===void 0||H.setAttribute("class","".concat(d," ").concat(r)),nt(function(){var W;(W=A.current)===null||W===void 0||W.setAttribute("class","".concat(d," ").concat(o))}),et(M.ENTER_TO);break;case M.LEAVE_TO:(Y=A.current)===null||Y===void 0||Y.setAttribute("class","".concat(F," ").concat(N)),nt(function(){var W;(W=A.current)===null||W===void 0||W.setAttribute("class","".concat(F," ").concat(g))}),et(M.LEAVE_TO);break}};return l.useLayoutEffect(function(){if(!_.current){_.current=n;return}K.current&&clearTimeout(K.current),p?(O(M.ENTER_ACTIVE),rt(M.ENTER_TO)):(O(M.LEAVE_ACTIVE),rt(M.LEAVE_TO))},[p]),(0,v.jsx)(v.Fragment,{children:U===M.UNMOUNTED?null:Mt})})},81208:function(s,P,u){var B=u(91066);function m(j){if(Array.isArray(j))return B(j)}s.exports=m,s.exports.__esModule=!0,s.exports.default=s.exports},76419:function(s){function P(u){if(typeof Symbol!="undefined"&&u[Symbol.iterator]!=null||u["@@iterator"]!=null)return Array.from(u)}s.exports=P,s.exports.__esModule=!0,s.exports.default=s.exports},374:function(s){function P(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}s.exports=P,s.exports.__esModule=!0,s.exports.default=s.exports},74875:function(s,P,u){var B=u(60918);function m(j,C){if(j==null)return{};var I=B(j,C),x,w;if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(j);for(w=0;w<z.length;w++)x=z[w],!(C.indexOf(x)>=0)&&Object.prototype.propertyIsEnumerable.call(j,x)&&(I[x]=j[x])}return I}s.exports=m,s.exports.__esModule=!0,s.exports.default=s.exports},60918:function(s){function P(u,B){if(u==null)return{};var m={},j=Object.keys(u),C,I;for(I=0;I<j.length;I++)C=j[I],!(B.indexOf(C)>=0)&&(m[C]=u[C]);return m}s.exports=P,s.exports.__esModule=!0,s.exports.default=s.exports},49616:function(s,P,u){var B=u(81208),m=u(76419),j=u(7278),C=u(374);function I(x){return B(x)||m(x)||j(x)||C()}s.exports=I,s.exports.__esModule=!0,s.exports.default=s.exports}}]);
